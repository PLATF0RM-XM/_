<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لوحة إدارة منصة XM</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
body{margin:0;font-family:Arial;background:#08152c;color:#fff}
header{padding:20px;text-align:center;font-size:22px;background:linear-gradient(135deg,#0b2a52,#07162e)}
.box{max-width:900px;margin:20px auto;background:rgba(255,255,255,.08);padding:20px;border-radius:16px}
input,select,button{width:100%;padding:12px;margin:6px 0;border-radius:8px;border:none}
button{background:#00c176;font-weight:bold}
</style>
</head>
<body>
<header>لوحة إدارة منصة XM</header>
<div class="box" id="login">
<input id="email" placeholder="البريد الإلكتروني">
<input id="password" type="password" placeholder="كلمة المرور">
<button onclick="login()">تسجيل الدخول</button>
</div>
<div class="box" id="panel" style="display:none">
<h3>إضافة صفقة جديدة</h3>
<input id="id" placeholder="رقم الصفقة (XM-xxxxxx)">
<input id="name" placeholder="اسم المستثمر">
<input id="phone" placeholder="رقم المستثمر">
<input id="amount" placeholder="مبلغ الاستثمار">
<input id="profit" placeholder="الأرباح">
<select id="fees">
<option value="true">يوجد رسوم</option>
<option value="false">لا يوجد رسوم</option>
</select>
<button onclick="add()">حفظ الصفقة</button>
</div>
<script>
firebase.initializeApp({
 apiKey:"AIzaSyDCVCtl1ca3NSoy6tAWCp-ykgGBa21ZNp8",
 authDomain:"investment-platform-b419d.firebaseapp.com",
 projectId:"investment-platform-b419d"
});
const auth=firebase.auth(),db=firebase.firestore();
function login(){
 auth.signInWithEmailAndPassword(email.value,password.value).then(()=>{
  db.collection("admins").where("email","==",email.value).get().then(s=>{
   if(s.empty){alert("غير مصرح");return;}
   login.style.display="none";panel.style.display="block";
  });
 }).catch(e=>alert(e.message));
}
function add(){
 db.collection("trades").doc(id.value).set({
  investorName:name.value,
  investorPhone:phone.value,
  amount:amount.value,
  profit:profit.value,
  feesRequired:fees.value==="true",
  status:"قيد المراجعة"
 }).then(()=>alert("تم حفظ الصفقة"));
}
</script>
</body>
</html>