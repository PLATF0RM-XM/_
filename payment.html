<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>سداد الرسوم | منصة XM</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
<style>
body{margin:0;font-family:Arial;background:#07162e;color:#fff;text-align:center}
.container{max-width:420px;margin:80px auto;background:rgba(255,255,255,.12);backdrop-filter:blur(16px);border-radius:18px;padding:25px}
.vc{background:#000;padding:12px;border-radius:10px;margin:15px 0;font-size:18px}
button{width:100%;padding:14px;border:none;border-radius:12px;background:#00c176;font-weight:bold}
</style>
</head>
<body>
<div class="container">
<h2>سداد رسوم الصفقة</h2>
<p>رقم فودافون كاش:</p>
<div class="vc">010XXXXXXXX</div>
<input type="file" id="img">
<button onclick="send()">إرسال إثبات التحويل</button>
</div>
<script>
firebase.initializeApp({
 apiKey:"AIzaSyDCVCtl1ca3NSoy6tAWCp-ykgGBa21ZNp8",
 authDomain:"investment-platform-b419d.firebaseapp.com",
 projectId:"investment-platform-b419d",
 storageBucket:"investment-platform-b419d.firebasestorage.app"
});
const db=firebase.firestore(),st=firebase.storage();
const tx=new URLSearchParams(location.search).get("tx");
function send(){
 const f=img.files[0];
 const ref=st.ref("payments/"+tx+".jpg");
 ref.put(f).then(()=>ref.getDownloadURL()).then(u=>{
  db.collection("trades").doc(tx).update({paymentImage:u,status:"تم إرسال الإثبات"})
  .then(()=>alert("تم الإرسال بنجاح"));
 });
}
</script>
</body>
</html>