
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>منصة XM</title>
<style>
body{font-family:Arial;background:#0b1c2d;color:#fff;padding:20px}
input,button{width:100%;padding:10px;margin:10px 0}
button{background:#1ecb6b;border:0;font-weight:bold}
</style>
</head>
<body>

<h2>تابع صفقتك</h2>
<input id="tradeId" placeholder="ادخل رقم الصفقة">
<button onclick="loadTrade()">عرض البيانات</button>
<div id="result"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore,collection,query,where,getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyDCVCtl1ca3NSoy6tAWCp-ykgGBa21ZNp8",
 authDomain: "investment-platform-b419d.firebaseapp.com",
 projectId: "investment-platform-b419d",
 storageBucket: "investment-platform-b419d.appspot.com",
 messagingSenderId: "831226258536",
 appId: "1:831226258536:web:6aae445cb9d33d06cd07dd"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.loadTrade = async()=>{
 const q=query(collection(db,"trades"),where("tradeId","==",tradeId.value));
 const s=await getDocs(q);
 if(s.empty){result.innerHTML="لا توجد صفقة";return;}
 s.forEach(d=>{
  const t=d.data();
  result.innerHTML=`
  <p>الاسم: ${t.name}</p>
  <p>الاستثمار: ${t.investment}</p>
  <p>الأرباح: ${t.profit}</p>
  <p>الرسوم: ${t.fees}</p>
  <p>الحالة: ${t.status}</p>
  ${t.fees>0?'<a href="payment.html">سدد الآن</a>':''}
  `;
 });
}
</script>
</body>
</html>
